include ~components/cart/cart
include ~components/logo/logo
include ~components/logo-mobile/logo-mobile
include ~components/mobile-menu/mobile-menu

mixin header(options = {})
  -
    const { formatPhone } = require('~utils/utils.js');
    const { store } = require('~store');
    const { CART_OPTIONS } = require('./mock.js');
    const cart = store.getState().cart;
    const cartLength = cart.length ?? 0;
    const phoneNumber = options?.number ?? '';
    const cleanedNumber = formatPhone(phoneNumber);

  header.header
    .header__wrapper
      .header__burger-wrapper
        button.header__burger-button
          .header__burger-lines-wrapper(aria-label="Меню")
            span.header__burger-lines
      .header__left-block
        .header__logo-wrapper
          a.header__logo-link(href="/")
            +logo
        .header__logo-mobile-wrapper
          a.header__logo-mobile-link(href="/")
            +logo-mobile
        .header__menu-wrapper
          nav.header__menu
            ul.header__menu-list
              each item in options.menuItems
                - const { title, link } = item;
                li.header__menu-item
                  a.header__menu-link(
                    href=link
                  )
                    span.header__menu-text=title

      .header__right-block
        if options.number
          .header__phone-wrapper
            a.header__phone-number(
              href=`tel:${cleanedNumber}`
            )=phoneNumber
              span.header__phone-text=options.phoneText
        .header__icons-wrapper
          nav.header__icons-menu
            ul.header__icons-menu-list
              each item in options.icons
                - const { link, src, text } = item;
                li.header__icons-menu-item
                  a.header__icons-menu-link(
                    href=link
                    aria-label=text
                  )
                    img.header__icon(src=require(`~assets/icons/${src}`))
              li.header__icons-menu-item
                button.header__cart-button(
                  aria-label="Открыть корзину"
                  data-element="cartCounter"
                )=cartLength
    .header__cart-wrapper
      +cart(CART_OPTIONS)
    .header__mobile-menu-wrapper
      +mobile-menu({
        menuItems: options.menuItems,
        icons: options.icons,
      })